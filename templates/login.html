{% extends 'base.html' %}

{% block head %}
<title>Login</title>
{% endblock %}

{% block body %}
   <header class="site-header">
       <div class="page-frame">
          <nav class="site-nav">
            <a href="{{ url_for('home') }}" class="logo">CityU Tracker</a>

            <ul class="nav-links">
              <li><a href="{{ url_for('home') }}" class="{{ 'active' if current == 'home' else '' }}">Home</a></li>
              <li><a href="{{ url_for('tracker') }}" class="{{ 'active' if current == 'tracker' else '' }}">Tracker</a></li>
              {% if current_user.is_authenticated %}
                <li><a href="{{ url_for('profile') }}" class="{{ 'active' if current == 'profile' else '' }}">Profile</a></li>
              {% endif %}
              <li><a href="{{ url_for('about') }}" class="{{ 'active' if current == 'about' else '' }}">About</a></li>
              {% if current_user.is_authenticated %}
                <li><a href="{{ url_for('logout') }}">Log Out</a></li>
              {% else %}
                <li><a href="{{ url_for('login') }}" class="{{ 'active' if current == 'login' else '' }}">Log In</a></li>
                <li><a href="{{ url_for('register') }}" class="{{ 'active' if current == 'register' else '' }}">Register</a></li>
              {% endif %}
            </ul>
          </nav>
       </div>
    </header>

  <main>
      <div class="container mt-4">
        <div class="row justify-content-center">
          <div class="col-md-6 col-lg-4">

            <form method="POST" action="{{ url_for('login', next=request.args.get('next')) }}">
              {{ form.hidden_tag() }}
              <h4 class="mb-2">Login</h4>
              <p class="text-muted mb-3">Log in to submit and manage your application results.</p>

              <div class="mb-3">
                {{ form.username() }}
                {% if request.method == "POST" %}
                  {% for error in form.username.errors %}
                    <div class="text-danger small">{{ error }}</div>
                  {% endfor %}
                {% endif %}
              </div>

              <div class="mb-3">
                {{ form.password() }}
                {% if request.method == "POST" %}
                  {% for error in form.password.errors %}
                    <div class="text-danger small">{{ error }}</div>
                  {% endfor %}
                {% endif %}
              </div>

              <div class="mb-3">
                {{ form.submit() }}
              </div>
            </form>

            {% with messages = get_flashed_messages(with_categories=true) %}
              {% for category, message in messages %}
                <div class="flash {{ category }}">{{ message }}</div>
              {% endfor %}
            {% endwith %}
           <div class="reminder mt-4">
            <a href="{{ url_for('register') }}" class="active">Don't have an account? Sign Up!</a>
            </div>
          </div>
        </div>
      </div>



</main>

{% endblock %}
